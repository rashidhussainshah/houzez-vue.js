import{z as W,H as P,g as S,I as C,k as M,A as g,q as T,o as w,c as y,b as e,j as L,i as d,v as c,E,t as U,x as k,J as Y,K as Z,l as K,C as z,L as F,r as V,u as p,s as D,w as j,d as x,F as R}from"./index-F0BtWOqF.js";const q=W("userProfile",{state:()=>({profile:{},profilePicture:"",socialMedia:{},loading:!1,errors:null,baseUrl:"/profile"}),getters:{getProfile:n=>n.profile},actions:{async getProfileInfo(){try{this.loading=!0;const n=`${this.baseUrl}/get-information`,l=await P.get(n);return this.setProfile(l.data.profile),this.loading=!1,new Promise(o=>o(l))}catch(n){return n.response&&n.response.data&&(this.errors=n.response),new Promise(l=>l(n.response))}},async updateProfileInfo(n){try{const l=`${this.baseUrl}/update-information`,o=await P.post(l,n);return this.setProfile(o.data.profile),new Promise(u=>u(o))}catch(l){return l.response.data&&(this.errors=l.response),new Promise(o=>o(l.response))}},async getProfilePicture(){try{const n=await P.get(`${this.baseUrl}/get-picture`);return this.setProfilePicture(n.data),new Promise(l=>l(n))}catch(n){return this.errors=n.response,new Promise(l=>l(n.response))}},async updateProfilePicture(n){try{const l=`${this.baseUrl}/update-picture`,o=await P.post(l,n,{headers:{"Content-Type":"multipart/form-data"}});return this.setProfilePicture(o.data.profile_picture_url),new Promise(u=>u(o))}catch(l){return l.response.data&&(this.errors=l.response),new Promise(o=>o(l.response))}},async getSocialMedia(){try{const n=`${this.baseUrl}/get-social-media`,l=await P.get(n);return this.setSocialMedia(l.data.profile),new Promise(o=>o(l))}catch(n){return n.response&&n.response.data&&(this.errors=n.response),new Promise(l=>l(n.response))}},async updateSocialMedia(n){try{const l=`${this.baseUrl}/update-social-media`,o=await P.post(l,n);return this.setSocialMedia(o.data.profile),new Promise(u=>u(o))}catch(l){return l.response.data&&(this.errors=l.response),new Promise(o=>o(l.response))}},setProfile(n){this.profile=n},setProfilePicture(n){this.profilePicture=n},setSocialMedia(n){this.socialMedia=n}}}),Q={class:"dashboard-content-block"},X={class:"row"},ee={class:"col-md-9 col-sm-12"},se={class:"row"},oe={class:"col-md-12 col-sm-12"},te={class:"form-group"},le={key:0,class:"text-danger"},re={class:"col-md-6 col-sm-12"},ae={class:"form-group"},ne={key:0,class:"text-danger"},ie={class:"col-md-6 col-sm-12"},ue={class:"form-group"},de={key:0,class:"text-danger"},ce=["disabled"],pe={__name:"ChangePassword",setup(n){const l=S();C(M());const o=g({current_password:"",new_password:"",password_confirmation:""}),u=g({current_password:"",new_password:"",password_confirmation:""}),b=t=>{t==="current_password"&&!o.value.current_password?u.value.current_password="Old password is required.":t==="new_password"&&!o.value.new_password?u.value.new_password="New password is required.":t==="new_password"&&o.value.new_password.length<8?u.value.new_password="New password must be at least 8 characters.":t==="password_confirmation"&&!o.value.password_confirmation?u.value.password_confirmation="Password confirmation is required.":t==="password_confirmation"&&o.value.password_confirmation!==o.value.new_password?u.value.password_confirmation="Passwords do not match.":u.value[t]=""},f=T(()=>Object.values(u.value).some(t=>t!=="")),r=()=>{o.value={current_password:"",new_password:"",password_confirmation:""},u.value={current_password:"",new_password:"",password_confirmation:""}},v=async()=>{if(Object.keys(o.value).forEach(b),f.value){l.Error("Please fix the errors before submitting.");return}try{const t=await M().changePassword(o.value);t.status===200?(l.Success("Password changed successfully."),r()):t.status===403?l.Error("Current password is incorrect."):l.Error("Password change failed.")}catch(t){l.Error(t)}};return(t,a)=>(w(),y("div",Q,[e("div",X,[a[9]||(a[9]=e("div",{class:"col-md-3 col-sm-12"},[e("h2",null,"Change Password")],-1)),e("div",ee,[e("form",{onSubmit:L(v,["prevent"])},[e("div",se,[e("div",oe,[e("div",te,[a[6]||(a[6]=e("label",null,"Old Password",-1)),d(e("input",{class:E(["form-control",{"is-invalid":u.value.current_password}]),"onUpdate:modelValue":a[0]||(a[0]=_=>o.value.current_password=_),placeholder:"Enter your current password",type:"text",onInput:a[1]||(a[1]=_=>b("current_password"))},null,34),[[c,o.value.current_password]]),u.value.current_password?(w(),y("span",le,U(u.value.current_password),1)):k("",!0)])]),e("div",re,[e("div",ae,[a[7]||(a[7]=e("label",null,"New Password",-1)),d(e("input",{class:E(["form-control",{"is-invalid":u.value.new_password}]),"onUpdate:modelValue":a[2]||(a[2]=_=>o.value.new_password=_),placeholder:"Enter your new password",type:"text",onInput:a[3]||(a[3]=_=>b("new_password"))},null,34),[[c,o.value.new_password]]),u.value.new_password?(w(),y("span",ne,U(u.value.new_password),1)):k("",!0)])]),e("div",ie,[e("div",ue,[a[8]||(a[8]=e("label",null,"Confirm New Password",-1)),d(e("input",{class:E(["form-control",{"is-invalid":u.value.password_confirmation}]),"onUpdate:modelValue":a[4]||(a[4]=_=>o.value.password_confirmation=_),placeholder:"Enter your new password again",type:"text",onInput:a[5]||(a[5]=_=>b("password_confirmation"))},null,34),[[c,o.value.password_confirmation]]),u.value.password_confirmation?(w(),y("span",de,U(u.value.password_confirmation),1)):k("",!0)])])]),e("button",{class:"btn btn-success",disabled:f.value},"Update Password",8,ce)],32)])])]))}},me={class:"dashboard-content-block"},fe={__name:"DeleteAccount",setup(n){const l=S(),o=Y(),u=Z(),b=()=>{o.Warning("Are you sure you want to delete this account?").then(async()=>{try{(await M().deleteAccount()).status===200&&(l.Success("Account successfully deleted!"),K.push({name:"app.register"}))}catch(f){l.Error(f)}}).catch(()=>{u.Info("Request cancelled")})};return(f,r)=>(w(),y("div",me,[e("div",{class:"row"},[r[0]||(r[0]=e("div",{class:"col-md-3 col-sm-12"},[e("h2",null,"Delete account")],-1)),e("div",{class:"col-md-9 col-sm-12"},[e("div",{class:"row"},[e("div",{class:"col-md-4 col-sm-12"},[e("button",{onClick:b,class:"btn btn-danger"},"Delete My Account")])])])])]))}},ve={class:"dashboard-content-block"},_e={class:"row"},we={class:"col-md-3 col-sm-12"},be=["src"],ye={class:"col-md-9 col-sm-12"},ge={class:"row"},he={class:"col-md-6 col-sm-12"},Pe={class:"form-group"},xe={class:"col-md-6 col-sm-12"},$e={class:"form-group"},Ee={key:0,class:"text-danger"},Ue={class:"col-md-6 col-sm-12"},ke={class:"form-group"},Ve={class:"col-md-6 col-sm-12"},Se={class:"form-group"},Ie={class:"col-md-6 col-sm-12"},Me={class:"form-group"},Fe={class:"col-md-6 col-sm-12"},Re={class:"form-group"},Ce={class:"col-md-6 col-sm-12"},Le={class:"form-group"},Ne={class:"col-md-6 col-sm-12"},Ae={class:"form-group"},De={class:"col-md-6 col-sm-12"},Te={class:"form-group"},ze={class:"col-md-6 col-sm-12"},je={class:"form-group"},qe={class:"col-md-6 col-sm-12"},Be={class:"form-group"},Oe={class:"col-md-6 col-sm-12"},Ge={class:"form-group"},He={class:"col-md-6 col-sm-12"},Je={class:"form-group"},We={class:"col-md-6 col-sm-12"},Ye={class:"form-group"},Ze={class:"col-md-12 col-sm-12"},Ke={class:"form-group"},Qe={class:"col-md-12 col-sm-12"},Xe={class:"form-group"},es=["disabled"],ss={__name:"Information",setup(n){const l=q(),{profile:o,profilePicture:u,loading:b}=C(l),f=S(),r=g({username:"",email:"",first_name:"",last_name:"",public_name:"",title:"",position:"",license:"",mobile:"",whatsapp:"",phone:"",tax_number:"",company_name:"",address:"",service_areas:"",specialties:"",about_me:""}),v=g({username:""}),t=m=>{if(m==="username"){const s=r.value.username;s?s.length<4?v.value.username="Username must be at least 4 characters.":/\s/.test(s)?v.value.username="Username cannot contain spaces.":/^[A-Za-z_][A-Za-z0-9_]*$/.test(s)?v.value.username="":v.value.username="Username must start with a letter or underscore, and contain only letters, numbers, or underscores.":v.value.username="Username is required."}else v.value[m]=""},a=T(()=>Object.values(v.value).some(m=>m!=="")),_=g(""),I=g(null),B=async()=>await l.getProfileInfo(),O=async()=>await l.getProfilePicture(),G=()=>{I.value&&I.value.click()},H=async m=>{const s=m.target.files[0];if(s){if(!["image/jpeg","image/png","image/jpg"].includes(s.type)){f.Error("Invalid file type. Only JPG, JPEG, and PNG files are allowed."),m.target.value="";return}if(s.size>2097152){f.Error("File size exceeds the 2MB limit. Please upload a smaller file."),m.target.value="";return}const $=new FileReader;$.onload=h=>{_.value=h.target.result},$.readAsDataURL(s);const i=new FormData;i.append("profile_picture",s);try{const h=await l.updateProfilePicture(i);h.status===200?(f.Success("Profile picture successfully updated!"),_.value=h.data.profile_picture_url):f.Error("Failed to update profile picture.")}catch(h){f.Error(h)}}},J=async()=>{if(Object.keys(r.value).forEach(t),a.value){f.Error("Please fix the errors before submitting.");return}try{const m=await l.updateProfileInfo(r.value);m.status===200?f.Success("Profile successfully updated"):m.status===409?f.Error("The username is already taken. Please choose a different one."):f.Error("Failed to update profile information.")}catch(m){f.Error(m)}};return z(()=>{B(),O(),o.value&&(r.value={...o.value}),u.value&&(_.value=u.value)}),F(o,m=>{m&&(r.value={...m})}),F(u,m=>{m&&(_.value=m)}),(m,s)=>{const N=V("el-skeleton-item"),A=V("el-skeleton"),$=V("el-avatar");return w(),y(R,null,[s[33]||(s[33]=e("h2",null,"Information",-1)),e("div",ve,[e("div",_e,[e("div",we,[p(b)?(w(),D(A,{key:0,style:{width:"240px"},animated:""},{template:j(()=>[x(N,{variant:"image",style:{width:"240px",height:"240px"}})]),_:1})):(w(),y(R,{key:1},[_.value?(w(),y("img",{key:0,class:"img-fluid",src:_.value,alt:"thumb"},null,8,be)):(w(),D($,{key:1,shape:"square",size:240,src:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png"}))],64)),e("button",{onClick:G,type:"button",class:"btn btn-primary btn-full-width mt-3"}," Update Profile Picture "),e("input",{type:"file",ref_key:"fileInput",ref:I,style:{display:"none"},onChange:H},null,544)]),e("div",ye,[e("form",{onSubmit:L(J,["prevent"])},[e("div",ge,[e("div",he,[e("div",Pe,[s[17]||(s[17]=e("label",null,"Email",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=i=>r.value.email=i),placeholder:"Enter your email",type:"text",readonly:""},null,512),[[c,r.value.email]])])]),e("div",xe,[e("div",$e,[s[18]||(s[18]=e("label",null,"Username",-1)),d(e("input",{class:E(["form-control",{"is-invalid":v.value.username}]),onInput:s[1]||(s[1]=i=>t("username")),"onUpdate:modelValue":s[2]||(s[2]=i=>r.value.username=i),placeholder:"Enter your username",type:"text"},null,34),[[c,r.value.username]])]),v.value.username?(w(),y("span",Ee,U(v.value.username),1)):k("",!0)]),e("div",Ue,[e("div",ke,[s[19]||(s[19]=e("label",null,"First Name",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=i=>r.value.first_name=i),placeholder:"Enter your first name",type:"text"},null,512),[[c,r.value.first_name]])])]),e("div",Ve,[e("div",Se,[s[20]||(s[20]=e("label",null,"Last Name",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[4]||(s[4]=i=>r.value.last_name=i),placeholder:"Enter your last name",type:"text"},null,512),[[c,r.value.last_name]])])]),e("div",Ie,[e("div",Me,[s[21]||(s[21]=e("label",null,"Public Name",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[5]||(s[5]=i=>r.value.public_name=i),placeholder:"Enter your last name",type:"text"},null,512),[[c,r.value.public_name]])])]),e("div",Fe,[e("div",Re,[s[22]||(s[22]=e("label",null,"Title",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[6]||(s[6]=i=>r.value.title=i),placeholder:"Enter your title",type:"text"},null,512),[[c,r.value.title]])])]),e("div",Ce,[e("div",Le,[s[23]||(s[23]=e("label",null,"Position",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[7]||(s[7]=i=>r.value.position=i),placeholder:"Enter your title",type:"text"},null,512),[[c,r.value.position]])])]),e("div",Ne,[e("div",Ae,[s[24]||(s[24]=e("label",null,"License",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[8]||(s[8]=i=>r.value.license=i),placeholder:"Enter your license",type:"text"},null,512),[[c,r.value.license]])])]),e("div",De,[e("div",Te,[s[25]||(s[25]=e("label",null,"Tax Number",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[9]||(s[9]=i=>r.value.tax_number=i),placeholder:"Enter your tax number",type:"text"},null,512),[[c,r.value.tax_number]])])]),e("div",ze,[e("div",je,[s[26]||(s[26]=e("label",null,"Mobile",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[10]||(s[10]=i=>r.value.mobile=i),placeholder:"Enter your phone number",type:"text"},null,512),[[c,r.value.mobile]])])]),e("div",qe,[e("div",Be,[s[27]||(s[27]=e("label",null,"Phone",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[11]||(s[11]=i=>r.value.phone=i),placeholder:"Enter your phone number",type:"text"},null,512),[[c,r.value.phone]])])]),e("div",Oe,[e("div",Ge,[s[28]||(s[28]=e("label",null,"Whatsapp",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[12]||(s[12]=i=>r.value.whatsapp=i),placeholder:"Enter your phone number",type:"text"},null,512),[[c,r.value.whatsapp]])])]),e("div",He,[e("div",Je,[s[29]||(s[29]=e("label",null,"Company Name",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[13]||(s[13]=i=>r.value.company_name=i),placeholder:"Enter your company name",type:"text"},null,512),[[c,r.value.company_name]])])]),e("div",We,[e("div",Ye,[s[30]||(s[30]=e("label",null,"Service area",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":s[14]||(s[14]=i=>r.value.service_areas=i),placeholder:"Enter your company name",type:"text"},null,512),[[c,r.value.service_areas]])])]),e("div",Ze,[e("div",Ke,[s[31]||(s[31]=e("label",null,"Address",-1)),d(e("textarea",{class:"form-control","onUpdate:modelValue":s[15]||(s[15]=i=>r.value.address=i),rows:"3",placeholder:"Enter your address"},null,512),[[c,r.value.address]])])]),e("div",Qe,[e("div",Xe,[s[32]||(s[32]=e("label",null,"About me",-1)),d(e("textarea",{class:"form-control","onUpdate:modelValue":s[16]||(s[16]=i=>r.value.about_me=i),rows:"6",placeholder:"Enter a description about you"},null,512),[[c,r.value.about_me]])])])]),e("button",{class:"btn btn-success",disabled:a.value,type:"submit"},"Update Profile",8,es)],32)])])])],64)}}},os={class:"dashboard-content-block"},ts={class:"row"},ls={class:"col-md-9 col-sm-12"},rs={class:"row"},as={class:"col-md-6 col-sm-12"},ns={class:"form-group"},is={class:"col-md-6 col-sm-12"},us={class:"form-group"},ds={class:"col-md-6 col-sm-12"},cs={class:"form-group"},ps={class:"col-md-6 col-sm-12"},ms={class:"form-group"},fs={class:"col-md-6 col-sm-12"},vs={class:"form-group"},_s={class:"col-md-6 col-sm-12"},ws={class:"form-group"},bs={class:"col-md-6 col-sm-12"},ys={class:"form-group"},gs={class:"col-md-6 col-sm-12"},hs={class:"form-group"},Ps={class:"col-md-6 col-sm-12"},xs={class:"form-group"},$s={class:"col-md-6 col-sm-12"},Es={class:"form-group"},Us={__name:"SocialMedia",setup(n){const l=q(),{socialMedia:o}=C(l),u=S(),b=g({facebook:"",twitter:"",linkedin:"",instagram:"",google_plus:"",youtube:"",pinterest:"",vimeo:"",skype:"",website:""}),f=async()=>await l.getSocialMedia(),r=async()=>{try{(await l.updateSocialMedia(b.value)).status===200&&u.Success("Social media accounts successfully updated!")}catch(v){u.Error(v)}};return z(()=>{f(),o.value&&(b.value={...o.value})}),F(o,v=>{v&&(b.value=v)}),(v,t)=>(w(),y("div",os,[e("div",ts,[t[21]||(t[21]=e("div",{class:"col-md-3 col-sm-12"},[e("h2",null,"Social Media")],-1)),e("div",ls,[e("form",{onSubmit:L(r,["prevent"])},[e("div",rs,[e("div",as,[e("div",ns,[t[10]||(t[10]=e("label",null,"Facebook",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>p(o).facebook=a),placeholder:"Enter the Facebook URL",type:"text"},null,512),[[c,p(o).facebook]])])]),e("div",is,[e("div",us,[t[11]||(t[11]=e("label",null,"Twitter",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=a=>p(o).twitter=a),name:"name",placeholder:"Enter the Twitter URL",type:"text"},null,512),[[c,p(o).twitter]])])]),e("div",ds,[e("div",cs,[t[12]||(t[12]=e("label",null,"Linkedin",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>p(o).linkedin=a),placeholder:"Enter the Linkedin URL",type:"text"},null,512),[[c,p(o).linkedin]])])]),e("div",ps,[e("div",ms,[t[13]||(t[13]=e("label",null,"Instagram",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=a=>p(o).instagram=a),placeholder:"Enter the Instagram URL",type:"text"},null,512),[[c,p(o).instagram]])])]),e("div",fs,[e("div",vs,[t[14]||(t[14]=e("label",null,"Google Plus",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>p(o).google_plus=a),placeholder:"Enter the Google Plus URL",type:"text"},null,512),[[c,p(o).google_plus]])])]),e("div",_s,[e("div",ws,[t[15]||(t[15]=e("label",null,"Youtube",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=a=>p(o).youtube=a),placeholder:"Enter the Youtube URL",type:"text"},null,512),[[c,p(o).youtube]])])]),e("div",bs,[e("div",ys,[t[16]||(t[16]=e("label",null,"Pinterest",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=a=>p(o).pinterest=a),placeholder:"Enter the Pinterest URL",type:"text"},null,512),[[c,p(o).pinterest]])])]),e("div",gs,[e("div",hs,[t[17]||(t[17]=e("label",null,"Vimeo",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=a=>p(o).vimeo=a),placeholder:"Enter the Vimeo URL",type:"text"},null,512),[[c,p(o).vimeo]])])]),e("div",Ps,[e("div",xs,[t[18]||(t[18]=e("label",null,"Skype",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=a=>p(o).skype=a),placeholder:"Enter your Skupe ID",type:"text"},null,512),[[c,p(o).skype]])])]),e("div",$s,[e("div",Es,[t[19]||(t[19]=e("label",null,"Website",-1)),d(e("input",{class:"form-control","onUpdate:modelValue":t[9]||(t[9]=a=>p(o).website=a),placeholder:"Enter your website URL",type:"text"},null,512),[[c,p(o).website]])])])]),t[20]||(t[20]=e("button",{class:"btn btn-success"},"Update Profile",-1))],32)])])]))}},ks={class:"dashboard-content-wrap"},Vs={class:"dashboard-content-inner-wrap"},Ss={class:"dashboard-content-block-wrap"},Ms={__name:"Index",setup(n){return(l,o)=>{const u=V("DashboardHeader");return w(),y(R,null,[x(u,{heading:"My Profile"},{default:j(()=>o[0]||(o[0]=[e("a",{class:"btn btn-primary",href:"#"},"View Public Profile",-1)])),_:1}),e("section",ks,[e("div",Vs,[e("div",Ss,[x(ss),x(Us),x(pe),x(fe)])])])],64)}}};export{Ms as default};
